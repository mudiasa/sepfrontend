<div class="ui-g ui-fluid">
    <div class="ui-g-12">
        <p-breadcrumb [model]="breadcrumbItems"></p-breadcrumb>
    </div>
    <div class="ui-g-12 ui-lg-12">
        <ng-container *ngIf="!rerender">
            <p-panel class="" header="Select a Requests to process">
                <div class="card card-w-title">
                    <p-table #ttAddAssignment [columns]="cols" [value]="requests" selectionMode="single" [(selection)]="selectedRequest"
                        sortField="id" sortOrder="-1" [resizableColumns]="true" [scrollable]="true"
                        scrollHeight="650px" [responsive]="true">

                        <ng-template pTemplate="colgroup" let-columns>
                            <colgroup>
                                <col *ngFor="let col of columns">
                            </colgroup>
                        </ng-template>

                        <ng-template pTemplate="caption">
                            <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
                            <input type="text" pInputText size="40" placeholder="Global Filter" (input)="ttAddAssignment.filterGlobal($event.target.value, 'contains')"
                                style="width:50%">
                        </ng-template>

                        <ng-template pTemplate="header" let-columns>
                            <tr>
                                <th *ngFor="let col of cols" [pSortableColumn]="col.field" pResizableColumn>
                                    {{col.header}}
                                    <p-sortIcon [field]="col.field"></p-sortIcon>
                                </th>
                        </ng-template>
                        <ng-template pTemplate="body" let-rowData let-columns="columns">
                            <tr [pSelectableRow]="rowData">
                                <td *ngFor="let col of columns" class="ui-resizable-column">
                                    {{rowData[col.field]}}
                                </td>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="footer" let-columns>
                            <tr>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="summary">
                            There are {{requests?.length}} requests in the Finance Manager queue
                        </ng-template>
                        <ng-template pTemplate="emptymessage" let-columns>
                            <tr>
                                <td [attr.colspan]="columns.length">
                                    No records found
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                    
                    


                    <div class="">
                        <button pButton type="button" (click)="sendToAdminManager()" label="Sent to ADM" icon="fa fa-paper-plane"
                            style="margin-bottom:0px; margin-right:10px" class="btn-size-long ui-button-success"
                            [disabled]="!selectedRequest"></button>

                        <button pButton (click)="showFeedbackDialog()" type="button" label="Add Feedback" icon="fa fa-pencil-square-o"
                            style="margin-bottom:0px" class="btn-size-long" [disabled]="!selectedRequest"></button>
                    </div>

                    <form class="card card-w-title" [formGroup]="feedbackForm">

                    </form>
                    

                </div>
            </p-panel>

        </ng-container>
    </div>

</div>



<p-dialog header="Request Feedback" [modal]="true" [(visible)]="displayFeedbackDialog" size="350" >

<form class="card card-w-title" [formGroup]="feedbackForm">

    <fieldset>
        <legend> (<i class="fa fa-asterisk" aria-hidden="true"></i> = Mandatory Fields)</legend>

        <div>
            &nbsp;
        </div>

        <div class="">
            <i class="fa fa-asterisk" aria-hidden="true"></i>
            <label for="">Feedback</label>
            <div class="ui-inputgroup">
                <textarea [rows]="2" [cols]="50" pInputTextarea placeholder="Max: 400 letters" autoResize="autoResize"
                    formControlName="description"></textarea>
            </div>
        </div>

<div class="">
    <button pButton type="button" label="Save" icon="fa fa-floppy-o" style="margin-bottom:0px; margin-right:10px"
        class="btn-size-short ui-button-success" [disabled]="hasFormsErrors()" (click)="saveFeedback()"></button>

    <button pButton (click)="initBooleans()" type="button" label="Cancel" icon="fa fa-times" style="margin-bottom:0px"
        class="btn-size-short"></button>
</div>

    </fieldset>
</form>



</p-dialog>

<p-growl [value]="messages" [immutable]="false" life="2000"></p-growl>

